<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GY-61 | Milli Zeka HattÄ±</title>
    <style>
        /* GÃ–RSEL KÄ°MLÄ°K: BORDO MAVÄ° BEYAZ */
        :root { --bordo: #610000; --mavi: #009BD7; --beyaz: #ffffff; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f4f7; margin: 0; user-select: none; }
        header { background: linear-gradient(90deg, var(--bordo), var(--mavi)); color: white; padding: 25px; text-align: center; border-bottom: 5px solid white; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        
        /* KOMUTA MERKEZÄ° */
        nav { display: flex; background: #1a1a1a; position: sticky; top: 0; z-index: 100; }
        nav button { flex: 1; padding: 15px; border: none; background: transparent; color: #888; font-weight: bold; cursor: pointer; border-bottom: 3px solid transparent; }
        nav button.active { color: var(--mavi); border-bottom-color: var(--mavi); }

        .container { max-width: 800px; margin: auto; padding: 20px; }
        .page { display: none; }
        .page.active { display: block; }
        
        .card { background: white; border-radius: 15px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border-left: 8px solid var(--bordo); }
        #chatBox { height: 380px; overflow-y: auto; border: 1px solid #eee; padding: 15px; background: #fff; border-radius: 10px; display: flex; flex-direction: column; }
        
        .msg { max-width: 80%; padding: 12px; margin: 8px 0; border-radius: 15px; font-size: 14px; line-height: 1.4; }
        .msg.bot { background: #e1f5fe; border-left: 5px solid #610000; align-self: flex-start; }
        .msg.user { background: var(--bordo); color: white; align-self: flex-end; }
        
        .input-area { display: flex; gap: 8px; margin-top: 15px; }
        input, textarea { flex: 1; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; }
        button.main-btn { background: var(--bordo); color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; }
        
        .footer-bar { position: fixed; bottom: 0; width: 100%; display: flex; height: 65px; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); }
        .f-btn { flex: 1; border: none; color: white; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body oncontextmenu="return false;">

    <header>
        <h1 style="margin:0;">GY-61 BÄ°RLEÅÄ°K SÄ°STEM</h1>
        <small>Milli YazÄ±lÄ±m - Sait Galeri Ã–zel</small>
    </header>

    <nav>
        <button onclick="acPage('vitrin')" class="tab-btn active" id="btn-vitrin">VÄ°TRÄ°N</button>
        <button onclick="acPage('uye')" class="tab-btn" id="btn-uye">ÃœYE PANELÄ°</button>
        <button onclick="acPage('admin')" class="tab-btn" id="btn-admin">SÄ°STEM BÄ°LGÄ°SÄ°</button>
    </nav>

    <div class="container">
        <section id="vitrin" class="page active">
            <div class="card">
                <div id="chatBox">
                    <div class="msg bot">Selamun AleykÃ¼m! Ben Sait Galeri asistanÄ±yÄ±m. Size nasÄ±l yardÄ±mcÄ± olabilirim? ğŸ¤ Mikrofonu kullanabilirsiniz.</div>
                </div>
                <div class="input-area">
                    <button style="background: var(--mavi); border-radius: 8px; border:none; padding: 0 15px; cursor:pointer; font-size: 20px;" onclick="startMic()">ğŸ¤</button>
                    <input type="text" id="userInput" placeholder="MesajÄ±nÄ±zÄ± buraya yazÄ±n...">
                    <button class="main-btn" onclick="gonder()">GÃ–NDER</button>
                </div>
            </div>
        </section>

        <section id="uye" class="page">
            <div class="card">
                <h3>âœï¸ Yavruyu EÄŸit</h3>
                <textarea id="uyeData" style="height: 150px;" placeholder="Ã–rn: Hafta sonlarÄ± AkyazÄ±'dayÄ±z..."></textarea>
                <button class="main-btn" style="background: var(--mavi); width: 100%; margin-top: 10px;" onclick="saveUyeData()">KAYDET</button>
            </div>
        </section>

        <section id="admin" class="page">
            <div class="card" style="border-left-color: gold;">
                <h3>ğŸ›¡ï¸ Sistem Durumu</h3>
                <p>API Durumu: <b id="apiStatus">BAÄLI (KOD Ä°Ã‡Ä°NDE)</b></p>
                <p>GÃ¼nlÃ¼k KullanÄ±m: <b id="usageCount">0</b> / 20</p>
                <button onclick="localStorage.setItem('gy61_sayac', 0); location.reload();" style="font-size: 10px; width: 100%;">SAYACI SIFIRLA</button>
            </div>
        </section>
    </div>

    <footer class="footer-bar">
        <button class="f-btn" style="background:#25D366;" onclick="window.location.href='tel:05XXXXXXXXX'">ğŸ“ HEMEN ARA</button>
        <button class="f-btn" style="background:#1a1a1a; color:var(--mavi);">âš™ï¸ KENDÄ° SÄ°STEMÄ°NÄ° KUR</button>
    </footer>

    <script>
        /* --- KOMUTA MERKEZÄ° --- */

        // ğŸ¯ PATRON, API ANAHTARINI AÅAÄIDAKÄ° TIRNAKLARIN Ä°Ã‡Ä°NE YAPIÅTIR!
        const API_ANAHTARIM = "BURAYA_API_KEY_YAPIÅTIR";

        const MUFREDAT = [
            { s: "ahlak", c: "Vizyonumuz dÃ¼rÃ¼stlÃ¼k ve milli deÄŸerler Ã¼zerine kuruludur." },
            { s: "neden 10 dolar", c: "Sistemin baÄŸÄ±msÄ±zlÄ±ÄŸÄ± ve altyapÄ± maliyetleri iÃ§indir." }
        ];

        // Ses Sistemleri
        function konus(text) {
            const synth = window.speechSynthesis;
            const utter = new SpeechSynthesisUtterance(text);
            utter.lang = 'tr-TR';
            synth.speak(utter);
        }

        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'tr-TR';
        recognition.onresult = (e) => {
            document.getElementById('userInput').value = e.results[0][0].transcript;
            gonder();
        };
        function startMic() { try { recognition.start(); } catch(e) {} }

        // Sayfa GeÃ§iÅŸ
        function acPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.getElementById('btn-' + id).classList.add('active');
        }

        function saveUyeData() { localStorage.setItem('gy61_u', document.getElementById('uyeData').value); alert("EÄŸitim Tamam!"); }

        // ANA ZEKA MOTORU
        async function gonder() {
            const inp = document.getElementById('userInput');
            const box = document.getElementById('chatBox');
            const soru = inp.value.trim();
            if(!soru) return;

            box.innerHTML += `<div class="msg user">${soru}</div>`;
            inp.value = "";
            box.scrollTop = box.scrollHeight;

            // 1. MÃ¼fredat
            const sabit = MUFREDAT.find(m => soru.toLowerCase().includes(m.s));
            if(sabit) {
                writeBot(sabit.c);
            } else {
                // 2. Global Zeka (Kodun Ä°Ã§indeki Anahtar)
                let sayac = parseInt(localStorage.getItem('gy61_sayac') || "0");
                if (sayac >= 20) {
                    writeBot("âŒ GÃ¼nlÃ¼k limit doldu.");
                } else {
                    try {
                        const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_ANAHTARIM}`, {
                            method: 'POST',
                            headers: {'Content-Type': 'application/json'},
                            body: JSON.stringify({contents:[{parts:[{text:soru}]}]})
                        });
                        const data = await res.json();
                        const cevap = data.candidates[0].content.parts[0].text;
                        
                        writeBot(cevap);
                        sayac++;
                        localStorage.setItem('gy61_sayac', sayac);
                        document.getElementById('usageCount').innerText = sayac;
                    } catch(e) { writeBot("Hata! AnahtarÄ± kodun iÃ§ine doÄŸru yazdÄ±ÄŸÄ±ndan emin ol patron."); }
                }
            }
        }

        function writeBot(t) {
            const box = document.getElementById('chatBox');
            box.innerHTML += `<div class="msg bot">${t}</div>`;
            box.scrollTop = box.scrollHeight;
            konus(t);
        }

        document.getElementById('usageCount').innerText = localStorage.getItem('gy61_sayac') || "0";
        document.getElementById('uyeData').value = localStorage.getItem('gy61_u') || "";
    </script>
</body>
</html>
