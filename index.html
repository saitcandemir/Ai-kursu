<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Dijital Vicdan 27</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: #f4f4f4; margin: 0; }
        #status { margin-bottom: 20px; font-weight: bold; color: #333; }
        #speakBtn { width: 120px; height: 120px; border-radius: 50%; border: none; background: #2563eb; color: white; font-size: 16px; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        #speakBtn:active { background: #1d4ed8; transform: scale(0.98); }
        #output { margin-top: 20px; width: 80%; max-width: 500px; text-align: center; line-height: 1.5; color: #555; }
    </style>
</head>
<body>

    <div id="status">Dijital Vicdan 27 Hazır</div>
    <button id="speakBtn">BAS KONUŞ</button>
    <div id="output">Cevap burada görünecek...</div>

    <script type="module">
        // Senin gönderdiğin modern GoogleGenAI yapısı (Web için CDN üzerinden)
        import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

        // BURAYA KENDİ API ANAHTARINI YAZ
        const API_KEY = "AIzaSyAxmSqsLPuVSJx6bO5_zqTgHKg-lREllY4"; 
        const genAI = new GoogleGenerativeAI(API_KEY);

        const model = genAI.getGenerativeModel({ 
            model: "gemini-2.5-flash", // İstediğin güncel model
            systemInstruction: "Sen Dijital Vicdan 27'sin. Popülizm yapma. 23 maddelik varlık amacına sadık kal. 10 saniye kuralını unutma, kısa ve öz cevap ver." 
        });

        const btn = document.getElementById('speakBtn');
        const output = document.getElementById('output');
        const status = document.getElementById('status');

        // Tarayıcı Ses Tanıma Ayarı
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'tr-TR';

        btn.onmousedown = () => {
            recognition.start();
            status.innerText = "Sizi dinliyorum...";
            btn.style.background = "#ef4444";
        };

        recognition.onresult = async (event) => {
            const userText = event.results[0][0].transcript;
            status.innerText = "Dijital Vicdan düşünüyor...";
            btn.style.background = "#94a3b8";

            try {
                // Senin gönderdiğin yapıdaki içerik üretme mantığı
                const result = await model.generateContent(userText);
                const response = await result.response;
                const text = response.text();

                output.innerText = text;
                status.innerText = "Dijital Vicdan Cevapladı";

                // Cevabı sesli oku (Diyalog için)
                const synth = window.speechSynthesis;
                const utter = new SpeechSynthesisUtterance(text);
                utter.lang = 'tr-TR';
                synth.speak(utter);

            } catch (error) {
                output.innerText = "Hata: " + error.message;
                status.innerText = "Bir sorun oluştu.";
            }
            btn.style.background = "#2563eb";
        };

        recognition.onspeechend = () => {
            recognition.stop();
        };
    </script>
</body>
</html>
